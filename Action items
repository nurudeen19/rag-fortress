Action items improvements/fixes TODO

## RECENTLY COMPLETED (December 17, 2025)

✅ **Architectural Improvements:**
- Structured Message Metadata (Pydantic schemas for Message.meta field)
- Async Event Bus (non-blocking activity logging, ~50x latency reduction)
- Centralized Job Bootstrap (config-driven job management with health monitoring)
- Job Guardrails (max_instances=1, error isolation, enabled flags)
- Activity Logging via Events (replaced synchronous DB writes with event emissions)

See: `backend/docs/ARCHITECTURAL_IMPROVEMENTS.md` for details.

---

Future Enhancements (Low Priority)
Semantic Caching: Implement semantic caching for RAG queries (if query A is semantically similar to query B, return cached result of B) to save embedding costs.
User Feedback Loop: Add endpoints to allow users to rate responses (thumbs up/down), which can be used to fine-tune the retrieval or intent classification logic.



## Overall System improvements

Frontend Security Audit

Token Response: The verify_token function returns only a user_id. Returning a structured object (e.g., TokenPayload with scopes/roles) would reduce database lookups for basic permission checks.

Document Ingestion Error Granularity: The pipeline catches generic Exception. Defining specific exceptions (e.g., ParsingError, EmbeddingError, StorageError) would allow for smarter retry logic (e.g., retry network errors, but fail permanently on parsing errors).

## Job management improvement:

✅ RESOLVED: Job scheduling centralized in bootstrap module with config-driven management
✅ RESOLVED: max_instances=1 enforced, error isolation implemented
✅ RESOLVED: Health endpoint added for observability

Remaining consideration:
- Execution Model: The system runs job scheduler inside API process. In horizontal scaling scenario, consider moving to separate worker process or use distributed locking.


Import Safety: Some factories import libraries inside functions (e.g., import langchain_chroma). While this makes dependencies optional, it can hide configuration errors until runtime. A "check dependencies" startup step would be safer.

