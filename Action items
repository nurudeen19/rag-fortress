Action items improvements/fixes TODO

Future Enhancements (Low Priority)
Semantic Caching: Implement semantic caching for RAG queries (if query A is semantically similar to query B, return cached result of B) to save embedding costs.
User Feedback Loop: Add endpoints to allow users to rate responses (thumbs up/down), which can be used to fine-tune the retrieval or intent classification logic.

# Next Version items
+ history encryption
+ reranker by user choice
+ hybrid search introduction
+ frontend conversation cache tightning 
+ better security handling of auth keys and all sensitive keys



## Overall System improvements

Frontend Security Audit

Token Response: The verify_token function returns only a user_id. Returning a structured object (e.g., TokenPayload with scopes/roles) would reduce database lookups for basic permission checks.

Document Ingestion Error Granularity: The pipeline catches generic Exception. Defining specific exceptions (e.g., ParsingError, EmbeddingError, StorageError) would allow for smarter retry logic (e.g., retry network errors, but fail permanently on parsing errors).


## Cosmetic Updates
explain_access_scope = false (default)

explain_access_scope = true (opt-in)

When enabled, you can surface high-level scope only, not document specifics.

With flag enabled and user is in the department:

  You do not have sufficient clearance to view this content within the Finance department.

With flag enabled and user is not in the department:

  You do not have access to this content because it belongs to a restricted department.
