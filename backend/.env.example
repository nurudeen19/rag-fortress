# Application Settings
APP_NAME=RAG Fortress
APP_DESCRIPTION=Secure document intelligence platform for teams
APP_VERSION=1.0.0
DEBUG=True
ENVIRONMENT=development
HOST=0.0.0.0
PORT=8000

# Data Directories
DATA_DIR=./data
KNOWLEDGE_BASE_DIR=./data/knowledge_base
PENDING_DIR=./data/knowledge_base/pending
PROCESSED_DIR=./data/knowledge_base/processed

# LLM Provider Selection (openai, google, huggingface, llamacpp)
LLM_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# Google Configuration
GOOGLE_API_KEY=your_google_api_key_here
GOOGLE_MODEL=gemini-pro
GOOGLE_TEMPERATURE=0.7
GOOGLE_MAX_TOKENS=2000

# HuggingFace Configuration (hosted endpoints)
HF_API_TOKEN=your_huggingface_token_here
HF_MODEL=meta-llama/Llama-2-7b-chat-hf
HF_ENDPOINT_URL=
HF_TASK=text-generation
HF_TEMPERATURE=0.7
HF_MAX_TOKENS=2000
HF_TIMEOUT=120

# Llama.cpp Configuration (local inference)
LLAMACPP_MODEL_PATH=./models/llama-7b-instruct-q4_0.gguf
LLAMACPP_TEMPERATURE=0.1
LLAMACPP_MAX_TOKENS=512
LLAMACPP_CONTEXT_SIZE=4096
LLAMACPP_N_THREADS=8
LLAMACPP_N_BATCH=512

# Llama.cpp HTTP Endpoint (OpenAI-compatible server)
LLAMACPP_ENDPOINT_URL=http://localhost:8080/v1
LLAMACPP_ENDPOINT_MODEL=llama-3.1-8b-instruct
LLAMACPP_ENDPOINT_API_KEY=changeme
LLAMACPP_ENDPOINT_TIMEOUT=120

# Fallback LLM Configuration (optional - defaults to small HuggingFace model if not set)
# Option 1: Use custom fallback model (recommended)
# Option 2: Use provider's default config (omit custom fields)
# Option 3: Leave empty to use default small HuggingFace model
FALLBACK_HF_ENDPOINT_URL=
FALLBACK_HF_TASK=text-generation
FALLBACK_HF_TIMEOUT=120
FALLBACK_LLM_PROVIDER=openai
FALLBACK_LLM_API_KEY=your_api_key_here
FALLBACK_LLM_MODEL=gpt-3.5-turbo
FALLBACK_LLM_TEMPERATURE=0.5
FALLBACK_LLM_MAX_TOKENS=1000

# Internal LLM settings
USE_INTERNAL_LLM=true
INTERNAL_LLM_PROVIDER=your_internal_llm_provider_here
INTERNAL_LLM_API_KEY=your_internal_llm_api_key_here
INTERNAL_LLM_MODEL=your_internal_llm_model_here
INTERNAL_LLM_TEMPERATURE=0.7
INTERNAL_LLM_MAX_TOKENS=1000
INTERNAL_LLM_MIN_SECURITY_LEVEL=4
INTERNAL_LLM_ENDPOINT_URL=
INTERNAL_LLM_TIMEOUT=120

# Internal llama.cpp overrides (used when INTERNAL_LLM_PROVIDER=llamacpp)
INTERNAL_LLAMACPP_MODEL_PATH=./models/llama-7b-instruct-q4_0.gguf
INTERNAL_LLAMACPP_CONTEXT_SIZE=4096
INTERNAL_LLAMACPP_N_THREADS=8
INTERNAL_LLAMACPP_N_BATCH=512


# ============================================================================
# Embedding Provider Configuration
# ============================================================================
# Supported providers: openai, google, huggingface (default), cohere
EMBEDDING_PROVIDER=huggingface

# OpenAI Embeddings
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
# OPENAI_EMBEDDING_DIMENSIONS=1536  # Optional: for ada-002 or text-embedding-3-*

# Google Embeddings (Vertex AI)
GOOGLE_EMBEDDING_MODEL=gemini-embedding-001
# GOOGLE_EMBEDDING_DIMENSIONS=768  # Optional: 768, 1536, or 3072 (default: 768)

# HuggingFace Embeddings (default - sentence-transformers, no API key needed)
HF_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
HF_EMBEDDING_DEVICE=cpu  # cpu or cuda

# Cohere Embeddings
COHERE_API_KEY=your_cohere_api_key
COHERE_EMBEDDING_MODEL=embed-english-v3.0
COHERE_INPUT_TYPE=search_document  # search_document, search_query, classification, clustering


# ============================================================================
# Vector Database Configuration
# ============================================================================
# Supported providers: chroma (local/dev), qdrant, pinecone, weaviate, milvus
# Note: Chroma is NOT allowed in production environments
VECTOR_DB_PROVIDER=chroma

# Common Vector Store Configuration (used by all providers that support local storage)
VECTOR_STORE_COLLECTION_NAME=rag_documents
VECTOR_STORE_PERSIST_DIRECTORY=./data/vector_store

# Qdrant Configuration (recommended for production)
# Local Qdrant
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_PREFER_GRPC=false
QDRANT_COLLECTION_NAME=rag_documents

# Qdrant Cloud (alternative to local)
# QDRANT_URL=https://your-cluster.qdrant.io
# QDRANT_API_KEY=your_qdrant_api_key

# Pinecone Configuration (cloud-based)
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=us-west1-gcp  # e.g., us-west1-gcp, us-east-1-aws
PINECONE_INDEX_NAME=rag-documents

# Weaviate Configuration
WEAVIATE_URL=http://localhost:8080
# WEAVIATE_API_KEY=your_weaviate_api_key  # Optional for Weaviate Cloud
WEAVIATE_CLASS_NAME=Document

# Milvus Configuration
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=rag_documents
# MILVUS_USER=username  # Optional
# MILVUS_PASSWORD=password  # Optional

# ============================================================================
# ============================================================================
# Database Configuration (User Data & Application Metadata)
# ============================================================================
# Supported providers: postgresql (recommended for production), mysql, sqlite
# Note: SQLite is NOT recommended for production environments
DATABASE_PROVIDER=postgresql

# These settings are shared between PostgreSQL and MySQL
DB_HOST=localhost
DB_PORT=5432  # Leave empty for default (5432 for PostgreSQL, 3306 for MySQL)
DB_USER=rag_fortress
DB_PASSWORD=your_secure_password
DB_NAME=rag_fortress

# PostgreSQL-Specific Configuration
POSTGRES_SSL_MODE=prefer  # disable, allow, prefer, require, verify-ca, verify-full

# MySQL-Specific Configuration
MYSQL_CHARSET=utf8mb4

# SQLite Configuration (Development/Testing only)
SQLITE_PATH=./rag_fortress.db
SQLITE_CHECK_SAME_THREAD=False

# Connection Pool Settings (PostgreSQL & MySQL)
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=False  # Set to True to log SQL queries (useful for debugging)

# Migration Settings
DB_AUTO_MIGRATE=False  # Automatically run migrations on startup
DB_DROP_ALL=False  # DANGER: Drop all tables on startup (development only!)

# ============================================================================
# RAG Configuration
# ============================================================================
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
TOP_K_RESULTS=5
SIMILARITY_THRESHOLD=0.7

# ============================================================================
# Security
# ============================================================================
SECRET_KEY=your_secret_key_here_change_in_production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ============================================================================
# CORS Configuration
# ============================================================================
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_CREDENTIALS=True
CORS_METHODS=*
CORS_HEADERS=*

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=logs/rag_fortress.log
LOG_MAX_BYTES=10485760  # 10MB
LOG_BACKUP_COUNT=5

# ============================================================================
# Email Configuration
# ============================================================================
# SMTP Server Settings
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM_EMAIL=noreply@ragfortress.com
SMTP_FROM_NAME=RAG Fortress
SMTP_USE_TLS=True
SMTP_USE_SSL=False

# Email Token Expiry
EMAIL_VERIFICATION_TOKEN_EXPIRE_MINUTES=1440  # 24 hours
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=60  # 1 hour
INVITE_TOKEN_EXPIRE_DAYS=7  # 7 days

# Frontend URLs for Email Links
FRONTEND_URL=http://localhost:5173
EMAIL_VERIFICATION_URL=http://localhost:5173/verify-email
PASSWORD_RESET_URL=http://localhost:5173/reset-password
INVITE_URL=http://localhost:5173/accept-invite

# ============================================================================
# Cache Configuration
# ============================================================================
# Cache Backend: 'redis' (production) or 'memory' (development)
# System automatically falls back to in-memory if Redis is unavailable
CACHE_BACKEND=redis
CACHE_ENABLED=true

# Redis Configuration
# Option 1: Full Redis URL (simplest, recommended)
CACHE_REDIS_URL=redis://localhost:6379/0
# For password-protected Redis:
# CACHE_REDIS_URL=redis://:password@localhost:6379/0
# For SSL/TLS:
# CACHE_REDIS_URL=rediss://:password@localhost:6380/0

# Option 2: Individual Redis Settings (alternative to URL)
# Uncomment and configure if not using CACHE_REDIS_URL
# CACHE_REDIS_HOST=localhost
# CACHE_REDIS_PORT=6379
# CACHE_REDIS_DB=0
# CACHE_REDIS_PASSWORD=
# CACHE_REDIS_SSL=false

# Advanced Redis Settings (optional)
# CACHE_REDIS_SOCKET_TIMEOUT=5
# CACHE_REDIS_SOCKET_KEEPALIVE=true
# CACHE_REDIS_MAX_CONNECTIONS=50
# CACHE_REDIS_RETRY_ON_TIMEOUT=true
# CACHE_REDIS_HEALTH_CHECK_INTERVAL=30

# TTL Configuration (Time To Live in seconds)
CACHE_TTL_DEFAULT=300          # 5 minutes - default for uncategorized data
CACHE_TTL_STATS=60             # 1 minute - job/file statistics
CACHE_TTL_CONFIG=3600          # 1 hour - app configuration
CACHE_TTL_USER_DATA=300        # 5 minutes - user profiles/stats
CACHE_TTL_SESSION=1800         # 30 minutes - user session data

# Cache Key Prefix (for multi-tenant or multiple environments)
# CACHE_KEY_PREFIX=rag_fortress

# ============================================================================
# Seeder Configuration (Optional)
# ============================================================================
# Controls which seeders run during database setup.
# Available seeders: roles_permissions, departments, admin, jobs, knowledge_base
#
# Leave both empty (default) to run ALL seeders during setup.
# Or explicitly configure which seeders to run/skip:
#
# Option 1 - ENABLED_SEEDERS: Only run specified seeders
#   Example: ENABLED_SEEDERS=admin,roles_permissions
#   Result: Only admin and roles_permissions will run
#
# Option 2 - DISABLED_SEEDERS: Run all except specified
#   Example: DISABLED_SEEDERS=departments,jobs
#   Result: Runs all seeders except departments and jobs
#
# If both are set: ENABLED_SEEDERS takes priority
# CLI flags override both: python setup.py --only-seeder admin
# Dependencies: roles_permissions must run before admin (auto-handled)
ENABLED_SEEDERS=
DISABLED_SEEDERS=

# ============================================================================
# Admin Account Configuration
# ============================================================================
# Default admin account credentials (used during database seeding)
# IMPORTANT: Change these values in production!
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@ragfortress.local
ADMIN_PASSWORD=admin@
ADMIN_FIRSTNAME=Admin
ADMIN_LASTNAME=User
