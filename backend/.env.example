# ==============================================================================
# APPLICATION
# ==============================================================================
APP_NAME=RAG Fortress
APP_DESCRIPTION=Secure document intelligence platform for teams
APP_VERSION=1.0.0
DEBUG=True
ENVIRONMENT=development
HOST=0.0.0.0
PORT=8000
DEMO_MODE=false

# ==============================================================================
# DATA DIRECTORIES
# ==============================================================================
DATA_DIR=./data
KNOWLEDGE_BASE_DIR=./data/knowledge_base
PENDING_DIR=./data/knowledge_base/pending
PROCESSED_DIR=./data/knowledge_base/processed

# ==============================================================================
# PRIMARY LLM PROVIDER (openai, google, huggingface, llamacpp)
# ==============================================================================
LLM_PROVIDER=openai

# OpenAI
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-3.5-turbo
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2000

# Google
GOOGLE_API_KEY=your_google_api_key_here
GOOGLE_MODEL=gemini-pro
GOOGLE_TEMPERATURE=0.7
GOOGLE_MAX_TOKENS=2000

# HuggingFace
HF_API_TOKEN=your_huggingface_token_here
HF_MODEL=meta-llama/Llama-2-7b-chat-hf
HF_ENDPOINT_URL=
HF_TASK=text-generation
HF_TEMPERATURE=0.7
HF_MAX_TOKENS=2000
HF_TIMEOUT=120

# Llama.cpp (local or API endpoint)
LLAMACPP_MODE=api
LLAMACPP_MODEL_PATH=./models/llama-7b-instruct-q4_0.gguf
LLAMACPP_TEMPERATURE=0.1
LLAMACPP_MAX_TOKENS=512
LLAMACPP_CONTEXT_SIZE=4096
LLAMACPP_N_THREADS=8
LLAMACPP_N_BATCH=512
LLAMACPP_ENDPOINT_URL=http://localhost:8080/v1
LLAMACPP_ENDPOINT_MODEL=llama-3.1-8b-instruct
LLAMACPP_ENDPOINT_API_KEY=changeme
LLAMACPP_ENDPOINT_TIMEOUT=120

# ==============================================================================
# FALLBACK LLM (used when primary fails)
# ==============================================================================
FALLBACK_LLM_PROVIDER=openai
FALLBACK_LLM_API_KEY=your_api_key_here
FALLBACK_LLM_MODEL=gpt-4o-mini
FALLBACK_LLM_TEMPERATURE=0.5
FALLBACK_LLM_MAX_TOKENS=1000
FALLBACK_LLAMACPP_MODE=api
FALLBACK_HF_ENDPOINT_URL=
FALLBACK_HF_TASK=text-generation
FALLBACK_HF_TIMEOUT=120

# ==============================================================================
# INTERNAL LLM (for sensitive/high-security documents)
# ==============================================================================
USE_INTERNAL_LLM=false
INTERNAL_LLM_PROVIDER=llamacpp
INTERNAL_LLM_API_KEY=
INTERNAL_LLM_MODEL=llama-3.1-8b-instruct
INTERNAL_LLM_TEMPERATURE=0.7
INTERNAL_LLM_MAX_TOKENS=1000
INTERNAL_LLM_MIN_SECURITY_LEVEL=4
INTERNAL_LLM_MODE=api
INTERNAL_LLM_ENDPOINT_URL=http://localhost:8080/v1
INTERNAL_LLM_TIMEOUT=120

# ==============================================================================
# CLASSIFIER/DECOMPOSER LLM (intent classification & query decomposition)
# ==============================================================================
ENABLE_LLM_CLASSIFIER=false
ENABLE_QUERY_DECOMPOSER=false

# Optional: Use dedicated LLM for classifier/decomposer (falls back to primary if not set)
CLASSIFIER_LLM_PROVIDER=huggingface
CLASSIFIER_LLM_API_KEY=huggingface_token_here
CLASSIFIER_LLM_MODEL=meta-llama/Llama-3.2-3B-Instruct

# HuggingFace-specific classifier settings
CLASSIFIER_HF_ENDPOINT_URL=
CLASSIFIER_HF_TASK=text-generation
CLASSIFIER_HF_TIMEOUT=120

# Llama.cpp-specific classifier settings
CLASSIFIER_LLAMACPP_MODE=api
CLASSIFIER_LLAMACPP_ENDPOINT_URL=
CLASSIFIER_LLAMACPP_TIMEOUT=120

# ==============================================================================
# EMBEDDING PROVIDER (openai, google, huggingface, cohere)
# ==============================================================================
EMBEDDING_PROVIDER=huggingface

# OpenAI
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Google
GOOGLE_EMBEDDING_MODEL=gemini-embedding-001

# HuggingFace (no API key needed)
HF_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
HF_EMBEDDING_DEVICE=cpu

# Cohere
COHERE_API_KEY=your_cohere_api_key
COHERE_EMBEDDING_MODEL=embed-english-v3.0
COHERE_INPUT_TYPE=search_document

# ==============================================================================
# VECTOR DATABASE (faiss, chroma, qdrant, pinecone, weaviate, milvus)
# ==============================================================================
VECTOR_DB_PROVIDER=faiss
VECTOR_STORE_COLLECTION_NAME=rag_documents
VECTOR_STORE_PERSIST_DIRECTORY=./data/vector_store

# Qdrant
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_PREFER_GRPC=false
QDRANT_COLLECTION_NAME=rag_documents
QDRANT_URL=
QDRANT_API_KEY=

# Pinecone
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=rag-documents

# Weaviate
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=
WEAVIATE_CLASS_NAME=Document

# Milvus
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=rag_documents
MILVUS_USER=
MILVUS_PASSWORD=

# ==============================================================================
# DATABASE (postgresql, mysql, sqlite)
# ==============================================================================
DATABASE_PROVIDER=postgresql

DB_HOST=localhost
DB_PORT=5432
DB_USER=rag_fortress
DB_PASSWORD=your_secure_password
DB_NAME=rag_fortress

# PostgreSQL
POSTGRES_SSL_MODE=prefer

# MySQL
MYSQL_CHARSET=utf8mb4

# SQLite (development only)
SQLITE_PATH=./rag_fortress.db
SQLITE_CHECK_SAME_THREAD=False

# Connection pooling
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=False

# Migrations
DB_AUTO_MIGRATE=False
DB_DROP_ALL=False

# ==============================================================================
# RAG CONFIGURATION
# ==============================================================================
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
CHUNK_INGESTION_BATCH_SIZE=1000

# Adaptive retrieval
MIN_TOP_K=3
MAX_TOP_K=10
RETRIEVAL_SCORE_THRESHOLD=0.5

# Reranker (recommended when using query decomposer)
ENABLE_RERANKER=true
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANKER_TOP_K=3
RERANKER_SCORE_THRESHOLD=0.3

# Intent classifier
ENABLE_INTENT_CLASSIFIER=true
INTENT_CONFIDENCE_THRESHOLD=0.7

# ==============================================================================
# SECURITY
# ==============================================================================
SECRET_KEY=your_secret_key_here_change_in_production_at_least_32_characters_long
SETTINGS_ENCRYPTION_KEY=your_settings_encryption_key_32_chars_minimum_for_aes_encryption
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==============================================================================
# CORS
# ==============================================================================
CORS_ORIGINS=http://localhost:5173,http://localhost:3000
CORS_CREDENTIALS=True
CORS_METHODS=*
CORS_HEADERS=*

# ==============================================================================
# RATE LIMITING
# ==============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
CONVERSATION_RATE_LIMIT_PER_MINUTE=10
CONVERSATION_RATE_LIMIT_PER_HOUR=100
RATE_LIMIT_STORAGE=memory
RATE_LIMIT_REDIS_URL=redis://localhost:6379/1

# ==============================================================================
# CACHE (redis, memory)
# ==============================================================================
CACHE_BACKEND=redis
CACHE_ENABLED=true
CACHE_REDIS_URL=redis://localhost:6379/0

# TTL in seconds
CACHE_TTL_DEFAULT=300
CACHE_TTL_STATS=60
CACHE_TTL_CONFIG=3600
CACHE_TTL_USER_DATA=300
CACHE_TTL_SESSION=1800

# ==============================================================================
# LOGGING
# ==============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=logs/rag_fortress.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# ==============================================================================
# EMAIL
# ==============================================================================
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM_EMAIL=noreply@ragfortress.com
SMTP_FROM_NAME=RAG Fortress
SMTP_USE_TLS=True
SMTP_USE_SSL=False

# Token expiry (minutes/days)
EMAIL_VERIFICATION_TOKEN_EXPIRE_MINUTES=1440
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=60
INVITE_TOKEN_EXPIRE_DAYS=7

# Frontend URLs
FRONTEND_URL=http://localhost:5173
EMAIL_VERIFICATION_URL=http://localhost:5173/verify-email
PASSWORD_RESET_URL=http://localhost:5173/reset-password
INVITE_URL=http://localhost:5173/accept-invite

# ==============================================================================
# SEEDERS
# ==============================================================================
ENABLED_SEEDERS=
DISABLED_SEEDERS=

# ==============================================================================
# DEFAULT ADMIN ACCOUNT
# ==============================================================================
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@ragfortress.com
ADMIN_PASSWORD=admin@RAGFortress123
ADMIN_FIRSTNAME=Admin
ADMIN_LASTNAME=User
