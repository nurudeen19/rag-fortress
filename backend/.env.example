# ==============================================================================
# APPLICATION
# ==============================================================================
APP_NAME=RAG Fortress
APP_DESCRIPTION=Secure document intelligence platform for teams
APP_VERSION=1.0.0
DEBUG=True
ENVIRONMENT=development
HOST=0.0.0.0
PORT=8000
DEMO_MODE=false

# ==============================================================================
# DATA DIRECTORIES
# ==============================================================================
DATA_DIR=./data
KNOWLEDGE_BASE_DIR=./data/knowledge_base
PENDING_DIR=./data/knowledge_base/pending
PROCESSED_DIR=./data/knowledge_base/processed

# ==============================================================================
# PRIMARY LLM PROVIDER (openai, google, huggingface, llamacpp)
# ==============================================================================
LLM_PROVIDER=openai

# Generic consolidated settings for all providers
LLM_API_KEY=your_api_key_here
LLM_MODEL=gpt-3.5-turbo
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=1000
# Provider-specific fields (fill only when applicable to your provider)
LLM_ENDPOINT_URL=
LLM_MODEL_PATH=
LLM_MODE=api
LLM_TIMEOUT=120
LLM_TASK=text-generation
LLM_CONTEXT_SIZE=4096
LLM_N_THREADS=4
LLM_N_BATCH=512

# ==============================================================================
# FALLBACK LLM (used when primary fails, optional)
# ==============================================================================
ENABLE_FALLBACK_LLM=false
FALLBACK_LLM_PROVIDER=openai
FALLBACK_LLM_API_KEY=your_api_key_here
FALLBACK_LLM_MODEL=gpt-4o-mini
FALLBACK_LLM_TEMPERATURE=0.5
FALLBACK_LLM_MAX_TOKENS=1000
# Provider-specific fallback fields (fill only when applicable)
FALLBACK_LLM_ENDPOINT_URL=
FALLBACK_LLM_MODEL_PATH=
FALLBACK_LLM_MODE=api
FALLBACK_LLM_TIMEOUT=120
FALLBACK_LLM_TASK=text-generation

# ==============================================================================
# INTERNAL LLM (for sensitive/high-security documents)
# ==============================================================================
ENABLE_INTERNAL_LLM=false
INTERNAL_LLM_PROVIDER=llamacpp
INTERNAL_LLM_API_KEY=
INTERNAL_LLM_MODEL=llama-3.1-8b-instruct
INTERNAL_LLM_TEMPERATURE=0.7
INTERNAL_LLM_MAX_TOKENS=1000
INTERNAL_LLM_MIN_SECURITY_LEVEL=4
INTERNAL_LLM_MODE=api
INTERNAL_LLM_ENDPOINT_URL=http://localhost:8080/v1
INTERNAL_LLM_TIMEOUT=120

# ==============================================================================
# CLASSIFIER/DECOMPOSER LLM (intent classification & query decomposition)
# ==============================================================================
ENABLE_LLM_CLASSIFIER=false
ENABLE_QUERY_DECOMPOSER=false

# REQUIRED if classifier/decomposer is enabled: must provide explicit configuration
CLASSIFIER_LLM_PROVIDER=
CLASSIFIER_LLM_API_KEY=
CLASSIFIER_LLM_MODEL=
# Provider-specific classifier fields (fill only when applicable)
CLASSIFIER_LLM_ENDPOINT_URL=
CLASSIFIER_LLM_TIMEOUT=120

# ==============================================================================
# EMBEDDING PROVIDER (openai, google, huggingface, cohere)
# ==============================================================================
EMBEDDING_PROVIDER=huggingface

# OpenAI
OPENAI_EMBEDDING_MODEL=text-embedding-3-small

# Google
GOOGLE_EMBEDDING_MODEL=gemini-embedding-001

# HuggingFace (no API key needed)
HF_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
HF_EMBEDDING_DEVICE=cpu

# Cohere
COHERE_API_KEY=your_cohere_api_key
COHERE_EMBEDDING_MODEL=embed-english-v3.0
COHERE_INPUT_TYPE=search_document

# ==============================================================================
# VECTOR DATABASE (faiss, chroma, qdrant, pinecone, weaviate, milvus)
# ==============================================================================
VECTOR_DB_PROVIDER=qdrant
ENABLE_HYBRID_SEARCH=false
VECTOR_STORE_COLLECTION_NAME=rag_documents
VECTOR_STORE_PERSIST_DIRECTORY=./data/vector_store

# Qdrant
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_PREFER_GRPC=false
QDRANT_COLLECTION_NAME=rag_documents
QDRANT_URL=
QDRANT_API_KEY=

# Pinecone
PINECONE_API_KEY=your_pinecone_api_key
PINECONE_ENVIRONMENT=us-west1-gcp
PINECONE_INDEX_NAME=rag-documents

# Weaviate
WEAVIATE_URL=http://localhost:8080
WEAVIATE_API_KEY=
WEAVIATE_CLASS_NAME=Document

# Milvus
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_COLLECTION_NAME=rag_documents
MILVUS_USER=
MILVUS_PASSWORD=

# ==============================================================================
# DATABASE (postgresql, mysql, sqlite)
# ==============================================================================
DATABASE_PROVIDER=postgresql

DB_HOST=localhost
DB_PORT=5432
DB_USER=rag_fortress
DB_PASSWORD=your_secure_password
DB_NAME=rag_fortress

# PostgreSQL
POSTGRES_SSL_MODE=prefer

# MySQL
MYSQL_CHARSET=utf8mb4

# SQLite (development only)
SQLITE_PATH=./rag_fortress.db
SQLITE_CHECK_SAME_THREAD=False

# Connection pooling
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=False

# Migrations
DB_AUTO_MIGRATE=False
DB_DROP_ALL=False

# ==============================================================================
# RAG CONFIGURATION
# ==============================================================================
CHUNK_SIZE=1000
CHUNK_OVERLAP=200
CHUNK_INGESTION_BATCH_SIZE=1000

# Adaptive retrieval
MIN_TOP_K=3
MAX_TOP_K=10
RETRIEVAL_SCORE_THRESHOLD=0.5

# Reranker (recommended when using query decomposer)
# Providers: huggingface (local), cohere (API), jina (API)
ENABLE_RERANKER=true
RERANKER_PROVIDER=huggingface
RERANKER_MODEL=cross-encoder/ms-marco-MiniLM-L-6-v2
RERANKER_API_KEY=
RERANKER_TOP_K=3
RERANKER_SCORE_THRESHOLD=0.5

# Intent classifier
ENABLE_INTENT_CLASSIFIER=true
INTENT_CONFIDENCE_THRESHOLD=0.7

# ==============================================================================
# SECURITY
# ==============================================================================
SECRET_KEY=your_secret_key_here_change_in_production_at_least_32_characters_long
SETTINGS_ENCRYPTION_KEY=your_settings_encryption_key_32_chars_minimum_for_aes_encryption
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# ==============================================================================
# CORS
# ==============================================================================
CORS_ORIGINS=["http://localhost:5173","http://localhost:3000"]
CORS_CREDENTIALS=True
CORS_METHODS=["GET", "POST", "PUT", "DELETE"]
CORS_HEADERS=["*"]

# ==============================================================================
# RATE LIMITING
# ==============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
CONVERSATION_RATE_LIMIT_PER_MINUTE=10
CONVERSATION_RATE_LIMIT_PER_HOUR=100
RATE_LIMIT_STORAGE=memory
RATE_LIMIT_REDIS_URL=redis://localhost:6379/1

# ==============================================================================
# CACHE (redis, memory)
# ==============================================================================
CACHE_BACKEND=redis
CACHE_ENABLED=true
CACHE_REDIS_URL=redis://localhost:6379/0

# TTL in seconds
CACHE_TTL_DEFAULT=300
CACHE_TTL_STATS=60
CACHE_TTL_CONFIG=3600
CACHE_TTL_USER_DATA=300
CACHE_TTL_SESSION=1800

# ==============================================================================
# LOGGING
# ==============================================================================
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=logs/rag_fortress.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=5

# ==============================================================================
# EMAIL
# ==============================================================================
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password_here
SMTP_FROM_EMAIL=noreply@ragfortress.com
SMTP_FROM_NAME=RAG Fortress
SMTP_USE_TLS=True
SMTP_USE_SSL=False

# Token expiry (minutes/days)
EMAIL_VERIFICATION_TOKEN_EXPIRE_MINUTES=1440
PASSWORD_RESET_TOKEN_EXPIRE_MINUTES=60
INVITE_TOKEN_EXPIRE_DAYS=7

# ==============================================================================
# SEEDERS
# ==============================================================================
ENABLED_SEEDERS=
DISABLED_SEEDERS=

# ==============================================================================
# LLM PROMPTS AND RETRIEVAL MESSAGES
# ==============================================================================
RAG_SYSTEM_PROMPT=
RETRIEVAL_NO_CONTEXT_MESSAGE=
PARTIAL_CONTEXT_CLEARANCE_PROMPT=
PARTIAL_CONTEXT_MISSING_PROMPT=
CLASSIFIER_SYSTEM_PROMPT=
CLASSIFIER_USER_PROMPT=
DECOMPOSER_SYSTEM_PROMPT=
RETRIEVAL_DEPT_BLOCKED_MESSAGE=
RETRIEVAL_SECURITY_BLOCKED_MESSAGE=

# ==============================================================================
# DEFAULT ADMIN ACCOUNT
# ==============================================================================
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@ragfortress.com
ADMIN_PASSWORD=admin@RAGFortress123
ADMIN_FIRSTNAME=Admin
ADMIN_LASTNAME=User
